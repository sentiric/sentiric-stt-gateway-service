# ğŸ‘‚ Sentiric STT Gateway Service - MantÄ±k ve AkÄ±ÅŸ Mimarisi

**Stratejik Rol:** KonuÅŸma TanÄ±ma (STT) isteklerini (dosya veya canlÄ± akÄ±ÅŸ) alÄ±r ve isteÄŸin tÃ¼rÃ¼ne, diline veya performans ihtiyacÄ±na gÃ¶re en uygun uzman STT motoruna (Whisper, Google) yÃ¶nlendirir.

---

## 1. AkÄ±llÄ± YÃ¶nlendirme ve Protokol DÃ¶nÃ¼ÅŸÃ¼mÃ¼

STT Gateway, gelen gRPC/HTTP isteklerini, uzman motorlarÄ±n beklediÄŸi API formatÄ±na Ã§evirir (REST/gRPC).

```mermaid
sequenceDiagram
    participant Agent as Agent Service
    participant STTGateway as STT Gateway Service
    participant Whisper as Uzman STT: Whisper
    participant GoogleSTT as Uzman STT: Google Cloud
    
    Agent->>STTGateway: Transcribe(audio_content, language)
    
    Note over STTGateway: 1. Ses Kalitesi / Model SeÃ§imi
    alt Ses kalitesi DÃ¼ÅŸÃ¼k/Yerel Tercih
        STTGateway->>Whisper: /whisper_transcribe (HTTP/gRPC)
    else Ses kalitesi YÃ¼ksek/Bulut Tercih
        STTGateway->>GoogleSTT: Google API Call
    end
    
    Whisper-->>STTGateway: Transcription Result
    GoogleSTT-->>STTGateway: Transcription Result

    STTGateway-->>Agent: TranscribeResponse(text)
```

## 2. Streaming (AkÄ±ÅŸ) YÃ¶netimi
Bu servis, canlÄ± telefon gÃ¶rÃ¼ÅŸmeleri gibi dÃ¼ÅŸÃ¼k gecikmeli senaryolarda TranscribeStream RPC'lerini veya WebSocket baÄŸlantÄ±larÄ±nÄ± da yÃ¶netecek ana noktadÄ±r.
* Gecikme (Latency) Ã–nemli: Agent, STT Gateway'e canlÄ± ses akÄ±ÅŸÄ±nÄ± iter. Gateway, bunu en hÄ±zlÄ± uzman motora (Ã¶rn: yerel modeller iÃ§in Ã¶zel olarak ayarlanmÄ±ÅŸ Whisper) yÃ¶nlendirir.